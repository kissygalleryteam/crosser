/*!build time : 2014-09-24 5:21:11 PM*/
KISSY.add("kg/crosser/0.0.1/index",function(a,b,c){function d(a){var b=this;this.param={url:a.url,data:a.data,success:a.success,complate:a.complate,error:a.error},this._orginName=window.name,this._domain=location.host.match(/\.(.*\.\w+)/)[1],this._dataForm=null,this._msgIframe=null,this._isPostMessage=null,this.prepare(),this.send(),d.superclass.constructor.call(b,a)}b.all;return d.prototype.prepare=function(){var a,b=this,c=b._isPostMessage="postMessage"in window;if(null!=document.getElementById("crossForm"))b._dataForm=document.getElementById("crossForm"),b._msgIframe=document.getElementById("crossIfr"),document.domain=b._domain;else{var d=document.getElementsByTagName("body")[0],e=this._dataForm=document.createElement("form");a=b._msgIframe=document.createElement(c?"iframe":'<iframe name="crossIfr">'),e.style.display="none",e.id="crossForm",e.action=this.param.url,e.target="crossIfr",e.method="post",d.appendChild(e),a.style.display="none",a.name="crossIfr",a.src="",a.id="crossIfr",d.appendChild(a),document.domain=b._domain,c&&(window.addEventListener?window.addEventListener("message",function(a){b.param[a.data]()},!1):window.attachEvent("onmessage",function(a){b.param[a.data]()}))}},d.prototype.send=function(){var a=this,b=a.param.data,c="",d=a._dataForm;for(var e in b)c+='<input type="hidden" name="'+e+'" value="'+b[e]+'" />';c+='<input type="hidden" name="domain" value="'+a._domain+'" />',d.innerHTML=c,a._isPostMessage||a.ieReceive(),d.submit()},d.prototype.ieReceive=function(){function a(){var a="";setTimeout(function(){return a=window.name,a!=b._originName?(b.param[a](),void(window.name=b._originName)):void setTimeout(arguments.callee,100)},100)}var b=this;a()},a.extend(d,c,{},{ATTRS:{}}),d},{requires:["node","base"]});